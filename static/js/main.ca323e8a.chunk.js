(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,a){e.exports=a(170)},124:function(e,t,a){},154:function(e,t){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(124),a(17)),s=a(36),i=a(19),u=a.n(i),m=a(31),p=a(14),E=a(10),f=a(59),d={USER_JOIN:"USER_JOIN",USER_JOINED:"USER_JOINED",USER_LEFT:"USER_LEFT",SET_ERROR:"SET_ERROR",ADD_MESSAGE:"ADD_MESSAGE",SET_PROFILE_IMAGE:"SET_PROFILE_IMAGE",SET_IMAGE:"SET_IMAGE",RESET:"RESET",SET_LOADING:"SET_LOADING",ASSIGN_TO_ROOM:"ASSIGN_TO_ROOM"},O=function(e,t){return function(e,t,a){return{username:e,sent_at:t,message:a}}("System",new Date,function(e){var t;return t={},Object(p.a)(t,d.USER_JOINED,"".concat(e," joined the room.")),Object(p.a)(t,d.USER_LEFT,"".concat(e," left the room.")),t}(t)[e])},b={error:"",messages:[],username:"",imageUrl:"",users:[],loading:!1,signedIn:!1},g=a(94),v=a.n(g),j=("http://localhost:".concat(3e3),v()("https://any-clip-server.herokuapp.com/"));j.connect();var y=function(e,t){j.on("message",(function(t){e({type:d.ADD_MESSAGE,payload:{message:t}})})),j.on("joinedRoom",(function(t){e({type:d.USER_JOINED,payload:{user:t}})})),j.on("leftRoom",(function(a){t===a.username?e({type:d.RESET,payload:{}}):e({type:d.USER_LEFT,payload:{user:a}})})),e({type:d.SIGN_TO_ROOM,payload:{}}),j.on("error",(function(e){console.log(e)}))},h=function(e,t,a){var c=r.a.createContext();return{Context:c,Provider:function(o){var s=o.children,i=Object(n.useReducer)(e,a),u=Object(l.a)(i,2),m=u[0],f=u[1],d=Object.keys(t).reduce((function(e,a){return Object(E.a)(Object(E.a)({},e),{},Object(p.a)({},a,t[a](f)))}),{});return r.a.createElement(c.Provider,{value:Object(E.a)({state:m},d)},s)}}}((function(e,t){var a=t.type,n=t.payload,r=n.user;switch(a){case d.SET_ERROR:var c=n.error;return Object(E.a)(Object(E.a)({},e),{},{error:c,loading:!1});case d.ADD_MESSAGE:var o=n.message;return Object(E.a)(Object(E.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(f.a)(e.messages),[o])});case d.USER_JOIN:var l=n.room,s=n.username;return Object(E.a)(Object(E.a)(Object(E.a)({},e),l),{},{loading:!0,username:s,error:""});case d.USER_LEFT:return Object(E.a)(Object(E.a)({},e),{},{users:Object(E.a)(Object(E.a)({},e.users),{},Object(p.a)({},r.username,null)),messages:[].concat(Object(f.a)(e.messages),[O(d.USER_LEFT,r.username)]),loading:!1,error:""});case d.USER_JOINED:return Object(E.a)(Object(E.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(f.a)(e.messages),[O(d.USER_JOINED,r.username)]),users:Object(E.a)(Object(E.a)({},e.users),{},Object(p.a)({},r.username,r))});case d.SET_PROFILE_IMAGE:var i=n.imageUrl;return Object(E.a)(Object(E.a)({},e),{},{imageUrl:i,error:"",loading:!1});case d.SET_LOADING:var u=n.loading;return Object(E.a)(Object(E.a)({},e),{},{loading:u});case d.ASSIGN_TO_ROOM:return Object(E.a)(Object(E.a)({},e),{},{signedIn:!0});case d.RESET:return Object(E.a)({},b);default:return e}}),{signUpForRoomChanges:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},joinRoom:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:d.SET_LOADING,payload:{loading:!0}});case 2:j.emit("joinRoom",{username:a,imageUrl:n},(function(t,n){e(n?{type:d.SET_ERROR,payload:{error:n}}:{type:d.USER_JOIN,payload:{room:t,username:a}})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},sendMessage:function(e){return function(t,a){j.emit("sendMessage",{username:t,message:a},(function(t,a){e(a?{type:d.SET_ERROR,payload:{error:a}}:{type:d.ADD_MESSAGE,payload:{message:t}})}))}},setProfileImage:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(a.size>1e6)){t.next=5;break}e({type:d.SET_ERROR,payload:{error:"File Too Big"}}),t.next=10;break;case 5:return t.next=7,e({type:d.SET_LOADING,payload:{loading:!0}});case 7:(n=new FileReader).onload=function(){var t=Object(m.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target.result,e({type:d.SET_PROFILE_IMAGE,payload:{imageUrl:n}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.readAsDataURL(a);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e({type:d.SET_ERROR,payload:{error:"File Format Not Supported"}});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}},b),S=h.Provider,R=h.Context,w=a(222),x=a(220),_=a(236),I=a(223),T=a(226),k=a(225),N=a(227),D=a(239),U=a(217),A=a(37),M=a(228);function C(){var e=Object(s.a)(["\n        pointer-events: none;\n      "]);return C=function(){return e},e}function G(){var e=Object(s.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  a {\n    text-decoration: none;\n    ","\n  }\n"]);return G=function(){return e},e}var L=A.b.div(G(),(function(e){return e.disabled&&Object(A.a)(C())})),P=Object(U.a)((function(e){return{avatarPicker:{padding:"0px",marginTop:"10px",borderWidth:"thin",flexDirection:"row",display:"flex",alignItems:"center",alignText:"center"}}})),F=function(e){var t=P(),a=Object(n.useContext)(R),c=a.state,o=a.setProfileImage,s=a.joinRoom,i=c.loading,u=function(e){var t=document.createElement("input");return t.setAttribute("type","file"),t.onchange=function(t){e(t.target.files[0])},t}(o),m=Object(n.useState)(null),p=Object(l.a)(m,2),E=p[0],f=p[1],d=Object(n.useCallback)((function(e){e&&s(e,c.imageUrl)}),[c]);return r.a.createElement(x.a,{"aria-labelledby":"simple-dialog-title",open:!c.username},r.a.createElement(w.a,null,"Sign In"),r.a.createElement(I.a,null,r.a.createElement(_.a,{error:c.error,id:"outlined-basic",label:"Username",variant:"outlined",value:E||"",helperText:c.error,onChange:function(e){f(e.target.value)}}),r.a.createElement(k.a,{className:t.avatarPicker},r.a.createElement(D.a,{alt:E,src:c.imageUrl}),r.a.createElement(L,{className:t.linkContainer},r.a.createElement("a",{href:"#",onClick:function(){u.click()}},"Choose Image")))),r.a.createElement(T.a,null,r.a.createElement(N.a,{variant:"contained",color:"primary",endIcon:i&&r.a.createElement(M.a,{color:"white",size:20}),onClick:function(){d(E)}},"SIGN IN")))},J=a(234),B=a(233),W=a(235),z=a(45),H=a(57),K=a(237),V=a(101),X=a.n(V),Y=a(229),$=a(231),q=a(230);function Q(){var e=Object(s.a)(["\n        background-color: lightgrey;\n      "]);return Q=function(){return e},e}function Z(){var e=Object(s.a)(["\n  ","\n"]);return Z=function(){return e},e}var ee=Object(A.b)(Y.a)(Z(),(function(e){return"System"===e.username&&Object(A.a)(Q())}));K.a.addLocale(X.a);var te=new K.a("en-US"),ae=function(e){var t=e.classes,a=e.user,n=Object(H.a)(e,["classes","user"]),c=n.message_id,o=n.sent_at,l=n.username,s=n.message,i=new Date(o);return r.a.createElement(ee,{username:l,alignItems:"flex-start",key:c},r.a.createElement(q.a,null,r.a.createElement(D.a,{alt:l,src:a.imageUrl})),r.a.createElement($.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{variant:"h6",component:"span",color:"textPrimary"},l)," said  \u2014  ",r.a.createElement(z.a,{variant:"h6",component:"span",color:"textPrimary"},r.a.createElement(z.a,{stlye:{display:"table-caption"},variant:"h6",component:"span",color:"textPrimary"},"".concat(s)))),primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{component:"span",style:{alignSelf:"flex-end"},variant:"body2",className:t.inline,color:"textPrimary"},"".concat(te.format(i))))}))},ne=a(102),re=a(224),ce=a(232),oe=Object(U.a)((function(e){return{root:{height:"80vh",overflowY:"scroll",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),le=function(){var e=oe(),t=Object(n.useContext)(R).state,a=t.messages,c=t.users,o=Object(n.useState)(!0),s=Object(l.a)(o,2),i=s[0],u=s[1],m=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){i&&m.current.scrollIntoView({behavior:"smooth"})}),[i,a.length]);var p=Object(ne.a)((function(){u(!0)}));return r.a.createElement(re.a,{ref:p,className:e.root,onScroll:function(e){u(!1)}},a.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(ae,Object.assign({classes:e,user:c[t.username]||{}},t)),r.a.createElement(ce.a,{variant:"inset",component:"li"}))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:m}))},se=Object(U.a)((function(e){return{root:{display:"flex",flexDirection:"row","& .MuiTextField-root":{width:"100%"}}}})),ie=function(){var e=se(),t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useContext)(R),i=s.state,u=i.username,m=i.error,p=s.sendMessage;return r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(_.a,{error:u&&m,helperText:u&&m,id:"outlined-multiline-static",label:"Message",multiline:!0,rows:4,value:c,variant:"outlined",onChange:function(e){o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(p(u,c),o(""))}}),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(){p(u,c),o("")}},"SEND"))},ue=function(e){var t=e.children,a=e.swipeRight,c=Object(H.a)(e,["children","swipeRight"]),o=Object(n.useState)(null),s=Object(l.a)(o,2),i=s[0],p=s[1],E=Object(n.useState)(null),f=Object(l.a)(E,2),d=f[0],O=f[1],b=Object(n.useRef)(null);return Object(n.useEffect)((function(){i<d&&i<15&&d>100&&(console.log("swipe"),a())}),[i,d]),Object(n.useLayoutEffect)((function(){b.current.addEventListener("touchstart",function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(null);case 2:p(t.changedTouches[0].clientX);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b.current.addEventListener("touchend",(function(e){O(e.changedTouches[0].clientX)}))}),[b]),r.a.createElement("div",Object.assign({ref:b},c),t)},me=a(240),pe=a(238),Ee=Object(U.a)((function(e){return{root:{overflowY:"scroll",backgroundColor:e.palette.background.paper}}})),fe=function(){var e=Object(n.useContext)(R).state.users,t=Ee();return r.a.createElement(re.a,{className:t.root,dense:!1},Object.values(e).filter(Boolean).map((function(e){var t=e.username,a=e.imageUrl;return r.a.createElement(Y.a,{key:t},r.a.createElement(q.a,null,r.a.createElement(D.a,{alt:t,src:a})),r.a.createElement($.a,{primary:t}))})))},de=function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:t.toolbar},r.a.createElement("div",{className:t.toolbarHeader},"Logged In Users")),r.a.createElement(ce.a,null),r.a.createElement(fe,null))},Oe=function(e){var t=e.classes;return r.a.createElement(pe.a,{xsDown:!0,implementation:"css"},r.a.createElement(me.a,{classes:{paper:t.drawerPaper},anchor:"left",variant:"permanent",open:!0,ModalProps:{keepMounted:!0}},r.a.createElement(de,{classes:t})))},be=function(e){var t=e.classes,a=e.mobileOpen,n=e.handleDrawerToggle,c=void 0!==window?function(){return window.document.body}:void 0;return r.a.createElement(pe.a,{smUp:!0,implementation:"css"},r.a.createElement(me.a,{container:c,variant:"temporary",anchor:"left",open:a,onClose:n,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement(de,{classes:t})))},ge=function(e){return r.a.createElement("div",{className:e.classes.drawer},r.a.createElement(be,e),r.a.createElement(Oe,e))},ve=Object(U.a)((function(e){var t;return{root:(t={display:"flex",paddingTop:"40px",flexDirection:"row"},Object(p.a)(t,"display","flex"),Object(p.a)(t,"overflow","none"),t),drawer:Object(p.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(p.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},toolbarHeader:{flexGrow:1,padding:e.spacing(3)},content:{width:"calc(100% - ".concat(240,"px)"),flex:1,display:"flex",flexDirection:"column"}}})),je=function(){var e=ve(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useContext)(R),i=s.state,u=i.signedIn,m=i.username,p=s.signUpForRoomChanges,E=Object(n.useRef)();Object(n.useEffect)((function(){!u&&m&&p(m)}),[m]);var f=function(){o(!c)};return r.a.createElement(ue,{ref:E,swipeRight:f,className:e.root},r.a.createElement(B.a,null),r.a.createElement(ge,{classes:e,mobileOpen:c,handleDrawerToggle:f}),r.a.createElement("div",{className:e.content},r.a.createElement(J.a,{position:"fixed",className:e.appBar},r.a.createElement(W.a,{className:e.appBar},r.a.createElement(z.a,{variant:"h6",noWrap:!0},"Any-Clip Chat"))),r.a.createElement(le,null),r.a.createElement(ie,null)))},ye=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement(je,null))};var he=function(){return r.a.createElement(S,null,r.a.createElement(ye,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.ca323e8a.chunk.js.map