(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,a,t){e.exports=t(190)},129:function(e,a,t){},174:function(e,a){},190:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),c=t.n(o),s=(t(129),t(99)),l=t.n(s),i=("http://localhost:".concat(3e3),"https://mini-clip-server.herokuapp.com/"),u=(l.a.create({baseURL:i}),t(100)),m=t.n(u)()(i);m.connect();var p=t(18),d=t(35),f=t(239),b=t(235),E=t(251),g=t(240),v=t(242),j=t(243),O=function(e){var a=e.state,t=Object(d.a)(e,["state"]),o=Object(n.useState)(null),c=Object(p.a)(o,2),s=c[0],l=c[1],i=Object(n.useCallback)((function(e){e&&t.joinRoom(e)}),[]);return r.a.createElement(b.a,{"aria-labelledby":"simple-dialog-title",open:!a.username},r.a.createElement(f.a,null,"Sign In"),r.a.createElement(g.a,null,r.a.createElement(E.a,{error:a.error,id:"outlined-basic",label:"Username",variant:"outlined",value:s||"",helperText:a.error,onChange:function(e){l(e.target.value)}})),r.a.createElement(v.a,null,r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){i(s)}},"SIGN IN")))},y=t(19),h=t(249),w=t(248),x=t(247),k=t(254),S=t(253),N=t(250),R=t(45),M=t(246),C=t(11),D=t(67),I=t(55),P=t(252),U=t(107),_=t.n(U),B=t(244),T=t(245);function F(){var e=Object(D.a)(["\n        background-color: lightgrey;\n      "]);return F=function(){return e},e}function L(){var e=Object(D.a)(["\n  ","\n"]);return L=function(){return e},e}var J=Object(I.b)(B.a)(L(),(function(e){return"System"===e.username&&Object(I.a)(F())}));P.a.addLocale(_.a);var G=new P.a("en-US"),W=function(e){var a=e.classes,t=Object(d.a)(e,["classes"]),n=t.message_id,o=t.sent_at,c=t.username,s=t.message,l=new Date(o);return r.a.createElement(J,{username:c,alignItems:"flex-start",key:n},r.a.createElement(T.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{variant:"h6",component:"span",color:"textPrimary"},c)," said  \u2014  ",r.a.createElement(R.a,{variant:"h6",component:"span",color:"textPrimary"},'"'.concat(s,'"'))),primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},"".concat(G.format(l))))}))},A=t(108),H=t(241),K=Object(M.a)((function(e){return{root:{height:"80vh",overflowY:"scroll",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),V=function(e){var a=e.messages,t=K(),o=Object(n.useState)(!0),c=Object(p.a)(o,2),s=c[0],l=c[1],i=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){s&&i.current.scrollIntoView({behavior:"smooth"})}),[i,s,a.length]);var u=Object(A.a)((function(){l(!0)}));return r.a.createElement(H.a,{ref:u,className:t.root,onScroll:function(e){l(!1)}},a.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(W,Object.assign({classes:t},e)),r.a.createElement(x.a,{variant:"inset",component:"li"}))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:i}))},Y=Object(M.a)((function(e){return{root:{display:"flex",flexDirection:"row","& .MuiTextField-root":{width:"100%"}}}})),$=function(e){var a=e.sendMessage,t=Y(),o=Object(n.useState)(""),c=Object(p.a)(o,2),s=c[0],l=c[1];return r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(E.a,{id:"outlined-multiline-static",label:"Message",multiline:!0,rows:4,value:s,variant:"outlined",onChange:function(e){l(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(a(s),l(""))}}),r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){a(s),l("")}},"SEND"))},q=Object(M.a)((function(e){return{root:{overflowY:"scroll",backgroundColor:e.palette.background.paper}}})),z=function(e){var a=e.users,t=q();return r.a.createElement(H.a,{className:t.root,dense:!1},a.map((function(e){return r.a.createElement(B.a,{key:e},r.a.createElement(T.a,{primary:e}))})))},Q=Object(M.a)((function(e){var a;return{root:(a={display:"flex",paddingTop:"40px",flexDirectoion:"row"},Object(y.a)(a,"display","flex"),Object(y.a)(a,"overflow","none"),a),drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(y.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},toolbarHeader:{flexGrow:1,padding:e.spacing(3)},content:{width:"calc(100% - ".concat(240,"px)"),flex:1,display:"flex",flexDirection:"column"}}})),X=function(e){var a=e.state,t=e.sendMessage,n=(Object(d.a)(e,["state","sendMessage"]),a.users),o=a.messages,c=Q(),s=(Object(C.a)(),r.a.useState(!1)),l=Object(p.a)(s,2),i=l[0],u=l[1],m=r.a.createElement("div",null,r.a.createElement("div",{className:c.toolbar},r.a.createElement("div",{className:c.toolbarHeader},"Logged In Users")),r.a.createElement(x.a,null),r.a.createElement(z,{users:n})),f=void 0!==window?function(){return window.document.body}:void 0;return r.a.createElement("div",{className:c.root},r.a.createElement(w.a,null),r.a.createElement("div",{className:c.drawer},r.a.createElement(S.a,{smUp:!0,implementation:"css"},r.a.createElement(k.a,{container:f,variant:"temporary",anchor:"left",open:i,onClose:function(){u(!i)},classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0}},m)),r.a.createElement(S.a,{xsDown:!0,implementation:"css"},r.a.createElement(k.a,{classes:{paper:c.drawerPaper},variant:"permanent",open:!0},m))),r.a.createElement("div",{className:c.content},r.a.createElement(h.a,{position:"fixed",className:c.appBar},r.a.createElement(N.a,{className:c.appBar},r.a.createElement(R.a,{variant:"h6",noWrap:!0},"Mini-Clip Chat"))),r.a.createElement(V,{messages:o}),r.a.createElement($,{sendMessage:t})))},Z=t(44),ee=t(15),ae="USER_JOIN",te="USER_JOINED",ne="USER_LEFT",re="SET_ERROR",oe="ADD_MESSAGE",ce="RESET",se=function(e,a){return function(e,a,t){return{username:e,sent_at:a,message:t}}("System",new Date,function(e){var a;return a={},Object(y.a)(a,te,"".concat(e," joined the room...")),Object(y.a)(a,ne,"".concat(e," left the room...")),a}(a)[e])},le={error:"",messages:[],username:"",users:[]},ie=function(e,a){var t=a.type,n=a.payload,r=n.username;switch(t){case re:var o=n.error;return Object(ee.a)(Object(ee.a)({},e),{},{error:o});case oe:var c=n.message;return Object(ee.a)(Object(ee.a)({},e),{},{error:"",messages:[].concat(Object(Z.a)(e.messages),[c])});case ae:var s=n.room;return Object(ee.a)(Object(ee.a)(Object(ee.a)({},e),s),{},{username:r,error:""});case ne:return Object(ee.a)(Object(ee.a)({},e),{},{users:e.users.filter((function(e){return e!==r})),messages:[].concat(Object(Z.a)(e.messages),[se(ne,r)]),error:""});case te:return Object(ee.a)(Object(ee.a)({},e),{},{error:"",messages:[].concat(Object(Z.a)(e.messages),[se(te,r)]),users:[].concat(Object(Z.a)(e.users),[r])});case ce:return le;default:return e}},ue=function(){var e=Object(n.useReducer)(ie,Object(ee.a)({},le)),a=Object(p.a)(e,2),t=a[0],r=a[1],o=Object(n.useState)(!1),c=Object(p.a)(o,2),s=c[0],l=c[1],i=t.username;Object(n.useEffect)((function(){i&&!s&&(!function(e,a){m.on("message",(function(a){e({type:oe,payload:{message:a}})})),m.on("joinedRoom",(function(a){var t=a.username;e({type:te,payload:{username:t}})})),m.on("leftRoom",(function(t){var n=t.username;e(a===n?{type:ce}:{type:ne,payload:{username:n}})})),m.on("error",(function(e){console.log(e)}))}(r),l(!0))}),[i,s]);var u={sendMessage:function(e){m.emit("sendMessage",{username:i,message:e},(function(e,a){if(a)return console.log(a);r({type:oe,payload:{message:e}})}))},joinRoom:function(e){m.emit("joinRoom",{username:e},(function(a,t){t?r({type:re,payload:{error:t}}):(r({type:ae,payload:{room:a,username:e}}),l(!0))}))}};return Object(ee.a)({state:t},u)},me=function(){var e=ue();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,e),r.a.createElement(X,e))};var pe=function(){return r.a.createElement(me,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[124,1,2]]]);
//# sourceMappingURL=main.bf034c96.chunk.js.map