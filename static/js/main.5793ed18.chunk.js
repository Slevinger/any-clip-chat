(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,a){e.exports=a(196)},134:function(e,t,a){},180:function(e,t){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(134),a(103)),s=a.n(l),i=("http://localhost:".concat(3e3),"https://any-clip-server.herokuapp.com/"),u=(s.a.create({baseURL:i}),a(18)),m=a(37),p=a(20),E=a.n(p),f=a(32),d=a(14),O=a(10),b=a(60),g={USER_JOIN:"USER_JOIN",USER_JOINED:"USER_JOINED",USER_LEFT:"USER_LEFT",SET_ERROR:"SET_ERROR",ADD_MESSAGE:"ADD_MESSAGE",SET_PROFILE_IMAGE:"SET_PROFILE_IMAGE",SET_IMAGE:"SET_IMAGE",RESET:"RESET",SET_LOADING:"SET_LOADING",ASSIGN_TO_ROOM:"ASSIGN_TO_ROOM"},j=function(e,t){return function(e,t,a){return{username:e,sent_at:t,message:a}}("System",new Date,function(e){var t;return t={},Object(d.a)(t,g.USER_JOINED,"".concat(e," joined the room.")),Object(d.a)(t,g.USER_LEFT,"".concat(e," left the room.")),t}(t)[e])},v={error:"",messages:[],username:"",imageUrl:"",users:[],loading:!1,signedIn:!1},y=a(104),h=a.n(y)()(i);h.connect();var S=function(e,t){h.on("message",(function(t){e({type:g.ADD_MESSAGE,payload:{message:t}})})),h.on("joinedRoom",(function(t){e({type:g.USER_JOINED,payload:{user:t}})})),h.on("leftRoom",(function(a){t===a.username?e({type:g.RESET,payload:{}}):e({type:g.USER_LEFT,payload:{user:a}})})),e({type:g.SIGN_TO_ROOM,payload:{}}),h.on("error",(function(e){console.log(e)}))},R=function(e,t,a){var c=r.a.createContext();return{Context:c,Provider:function(o){var l=o.children,s=Object(n.useReducer)(e,a),i=Object(u.a)(s,2),m=i[0],p=i[1],E=Object.keys(t).reduce((function(e,a){return Object(O.a)(Object(O.a)({},e),{},Object(d.a)({},a,t[a](p)))}),{});return r.a.createElement(c.Provider,{value:Object(O.a)({state:m},E)},l)}}}((function(e,t){var a=t.type,n=t.payload,r=n.user;switch(a){case g.SET_ERROR:var c=n.error;return Object(O.a)(Object(O.a)({},e),{},{error:c,loading:!1});case g.ADD_MESSAGE:var o=n.message;return Object(O.a)(Object(O.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(b.a)(e.messages),[o])});case g.USER_JOIN:var l=n.room,s=n.username;return Object(O.a)(Object(O.a)(Object(O.a)({},e),l),{},{loading:!0,username:s,error:""});case g.USER_LEFT:return Object(O.a)(Object(O.a)({},e),{},{users:Object(O.a)(Object(O.a)({},e.users),{},Object(d.a)({},r.username,null)),messages:[].concat(Object(b.a)(e.messages),[j(g.USER_LEFT,r.username)]),loading:!1,error:""});case g.USER_JOINED:return Object(O.a)(Object(O.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(b.a)(e.messages),[j(g.USER_JOINED,r.username)]),users:Object(O.a)(Object(O.a)({},e.users),{},Object(d.a)({},r.username,r))});case g.SET_PROFILE_IMAGE:var i=n.imageUrl;return Object(O.a)(Object(O.a)({},e),{},{imageUrl:i,error:"",loading:!1});case g.SET_LOADING:var u=n.loading;return Object(O.a)(Object(O.a)({},e),{},{loading:u});case g.ASSIGN_TO_ROOM:return Object(O.a)(Object(O.a)({},e),{},{signedIn:!0});case g.RESET:return Object(O.a)({},v);default:return e}}),{signUpForRoomChanges:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},joinRoom:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a,n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:g.SET_LOADING,payload:{loading:!0}});case 2:h.emit("joinRoom",{username:a,imageUrl:n},(function(t,n){e(n?{type:g.SET_ERROR,payload:{error:n}}:{type:g.USER_JOIN,payload:{room:t,username:a}})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},sendMessage:function(e){return function(t,a){h.emit("sendMessage",{username:t,message:a},(function(t,a){e(a?{type:g.SET_ERROR,payload:{error:a}}:{type:g.ADD_MESSAGE,payload:{message:t}})}))}},setProfileImage:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(a.size>4e6)){t.next=5;break}e({type:g.SET_ERROR,payload:{error:"File Too Big"}}),t.next=10;break;case 5:return t.next=7,e({type:g.SET_LOADING,payload:{loading:!0}});case 7:(n=new FileReader).onload=function(){var t=Object(f.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target.result,e({type:g.SET_PROFILE_IMAGE,payload:{imageUrl:n}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.readAsDataURL(a);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e({type:g.SET_ERROR,payload:{error:"File Format Not Supported"}});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}},v),x=R.Provider,_=R.Context,w=a(248),I=a(246),T=a(262),k=a(249),N=a(252),U=a(251),D=a(253),A=a(265),M=a(243),C=a(38),L=a(254);function G(){var e=Object(m.a)(["\n        pointer-events: none;\n      "]);return G=function(){return e},e}function P(){var e=Object(m.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  a {\n    text-decoration: none;\n    ","\n  }\n"]);return P=function(){return e},e}var F=C.b.div(P(),(function(e){return e.disabled&&Object(C.a)(G())})),J=Object(M.a)((function(e){return{avatarPicker:{padding:"0px",marginTop:"10px",borderWidth:"thin",flexDirection:"row",display:"flex",alignItems:"center",alignText:"center"}}})),B=function(e){var t=J(),a=Object(n.useContext)(_),c=a.state,o=a.setProfileImage,l=a.joinRoom,s=c.loading,i=function(e){var t=document.createElement("input");return t.setAttribute("type","file"),t.onchange=function(t){e(t.target.files[0])},t}(o),m=Object(n.useState)(null),p=Object(u.a)(m,2),E=p[0],f=p[1],d=Object(n.useCallback)((function(e){e&&l(e,c.imageUrl)}),[c]);return r.a.createElement(I.a,{"aria-labelledby":"simple-dialog-title",open:!c.username},r.a.createElement(w.a,null,"Sign In"),r.a.createElement(k.a,null,r.a.createElement(T.a,{error:c.error,id:"outlined-basic",label:"Username",variant:"outlined",value:E||"",helperText:c.error,onChange:function(e){f(e.target.value)}}),r.a.createElement(U.a,{className:t.avatarPicker},r.a.createElement(A.a,{alt:E,src:c.imageUrl}),r.a.createElement(F,{className:t.linkContainer},r.a.createElement("a",{href:"#",onClick:function(){i.click()}},"Choose Image")))),r.a.createElement(N.a,null,r.a.createElement(D.a,{variant:"contained",color:"primary",endIcon:s&&r.a.createElement(L.a,{color:"white",size:20}),onClick:function(){d(E)}},"SIGN IN")))},W=a(260),z=a(259),H=a(258),K=a(266),V=a(264),X=a(261),Y=a(47),$=a(58),q=a(263),Q=a(111),Z=a.n(Q),ee=a(255),te=a(257),ae=a(256);function ne(){var e=Object(m.a)(["\n        background-color: lightgrey;\n      "]);return ne=function(){return e},e}function re(){var e=Object(m.a)(["\n  ","\n"]);return re=function(){return e},e}var ce=Object(C.b)(ee.a)(re(),(function(e){return"System"===e.username&&Object(C.a)(ne())}));q.a.addLocale(Z.a);var oe=new q.a("en-US"),le=function(e){var t=e.classes,a=e.user,n=Object($.a)(e,["classes","user"]),c=n.message_id,o=n.sent_at,l=n.username,s=n.message,i=new Date(o);return r.a.createElement(ce,{username:l,alignItems:"flex-start",key:c},r.a.createElement(ae.a,null,r.a.createElement(A.a,{alt:l,src:a.imageUrl})),r.a.createElement(te.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{variant:"h6",component:"span",color:"textPrimary"},l)," said  \u2014  ",r.a.createElement(Y.a,{variant:"h6",component:"span",color:"textPrimary"},r.a.createElement(Y.a,{stlye:{display:"table-caption"},variant:"h6",component:"span",color:"textPrimary"},"".concat(s)))),primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{component:"span",style:{alignSelf:"flex-end"},variant:"body2",className:t.inline,color:"textPrimary"},"".concat(oe.format(i))))}))},se=a(112),ie=a(250),ue=Object(M.a)((function(e){return{root:{height:"80vh",overflowY:"scroll",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),me=function(){var e=ue(),t=Object(n.useContext)(_).state,a=t.messages,c=t.users,o=Object(n.useState)(!0),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){s&&m.current.scrollIntoView({behavior:"smooth"})}),[s,a.length]);var p=Object(se.a)((function(){i(!0)}));return r.a.createElement(ie.a,{ref:p,className:e.root,onScroll:function(e){i(!1)}},a.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(le,Object.assign({classes:e,user:c[t.username]||{}},t)),r.a.createElement(H.a,{variant:"inset",component:"li"}))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:m}))},pe=Object(M.a)((function(e){return{root:{display:"flex",flexDirection:"row","& .MuiTextField-root":{width:"100%"}}}})),Ee=function(){var e=pe(),t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useContext)(_),s=l.state,i=s.username,m=s.error,p=l.sendMessage;return r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(T.a,{error:i&&m,helperText:i&&m,id:"outlined-multiline-static",label:"Message",multiline:!0,rows:4,value:c,variant:"outlined",onChange:function(e){o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(p(i,c),o(""))}}),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){p(i,c),o("")}},"SEND"))},fe=Object(M.a)((function(e){return{root:{overflowY:"scroll",backgroundColor:e.palette.background.paper}}})),de=function(){var e=Object(n.useContext)(_).state.users,t=fe();return r.a.createElement(ie.a,{className:t.root,dense:!1},Object.values(e).filter(Boolean).map((function(e){var t=e.username,a=e.imageUrl;return r.a.createElement(ee.a,{key:t},r.a.createElement(ae.a,null,r.a.createElement(A.a,{alt:t,src:a})),r.a.createElement(te.a,{primary:t}))})))},Oe=function(e){var t=e.children,a=e.swipeRight,c=Object($.a)(e,["children","swipeRight"]),o=Object(n.useState)(null),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(n.useState)(null),p=Object(u.a)(m,2),d=p[0],O=p[1],b=Object(n.useRef)(null);return Object(n.useEffect)((function(){s<d&&s<15&&d>100&&(console.log("swipe"),a())}),[s,d]),Object(n.useLayoutEffect)((function(){b.current.addEventListener("touchstart",function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(null);case 2:i(t.changedTouches[0].clientX);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b.current.addEventListener("touchend",(function(e){O(e.changedTouches[0].clientX)}))}),[b]),r.a.createElement("div",Object.assign({ref:b},c),t)},be=Object(M.a)((function(e){var t;return{root:(t={display:"flex",paddingTop:"40px",flexDirection:"row"},Object(d.a)(t,"display","flex"),Object(d.a)(t,"overflow","none"),t),drawer:Object(d.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(d.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},toolbarHeader:{flexGrow:1,padding:e.spacing(3)},content:{width:"calc(100% - ".concat(240,"px)"),flex:1,display:"flex",flexDirection:"column"}}})),ge=function(){var e=be(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useContext)(_),s=l.state,i=(s.users,s.signedIn),m=s.username,p=l.signUpForRoomChanges,E=Object(n.useRef)();Object(n.useEffect)((function(){!i&&m&&p(m)}),[m]);var f=function(){o(!c)},d=r.a.createElement("div",null,r.a.createElement("div",{className:e.toolbar},r.a.createElement("div",{className:e.toolbarHeader},"Logged In Users")),r.a.createElement(H.a,null),r.a.createElement(de,null)),O=void 0!==window?function(){return window.document.body}:void 0;return r.a.createElement(Oe,{ref:E,swipeRight:f,className:e.root},r.a.createElement(z.a,null),r.a.createElement("div",{className:e.drawer},r.a.createElement(V.a,{smUp:!0,implementation:"css"},r.a.createElement(K.a,{container:O,variant:"temporary",anchor:"left",open:c,onClose:f,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},d)),r.a.createElement(V.a,{xsDown:!0,implementation:"css"},r.a.createElement(K.a,{classes:{paper:e.drawerPaper},anchor:"left",variant:"permanent",open:!0,ModalProps:{keepMounted:!0}},d))),r.a.createElement("div",{className:e.content},r.a.createElement(W.a,{position:"fixed",className:e.appBar},r.a.createElement(X.a,{className:e.appBar},r.a.createElement(Y.a,{variant:"h6",noWrap:!0},"Any-Clip Chat"))),r.a.createElement(me,null),r.a.createElement(Ee,null)))},je=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(ge,null))};var ve=function(){return r.a.createElement(x,null,r.a.createElement(je,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.5793ed18.chunk.js.map