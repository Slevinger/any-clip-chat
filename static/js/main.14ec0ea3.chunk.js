(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,a,t){e.exports=t(197)},135:function(e,a,t){},181:function(e,a){},197:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),c=t.n(o),l=(t(135),t(102)),s=t.n(l),i=("http://localhost:".concat(3e3),"https://any-clip-server.herokuapp.com/"),u=(s.a.create({baseURL:i}),t(20)),m=t(36),p=t(23),E=t.n(p),d=t(46),f=t(14),O=t(10),b=t(59),g={USER_JOIN:"USER_JOIN",USER_JOINED:"USER_JOINED",USER_LEFT:"USER_LEFT",SET_ERROR:"SET_ERROR",ADD_MESSAGE:"ADD_MESSAGE",SET_PROFILE_IMAGE:"SET_PROFILE_IMAGE",SET_IMAGE:"SET_IMAGE",RESET:"RESET",SET_LOADING:"SET_LOADING",ASSIGN_TO_ROOM:"ASSIGN_TO_ROOM"},v=function(e,a){return function(e,a,t){return{username:e,sent_at:a,message:t}}("System",new Date,function(e){var a;return a={},Object(f.a)(a,g.USER_JOINED,"".concat(e," joined the room.")),Object(f.a)(a,g.USER_LEFT,"".concat(e," left the room.")),a}(a)[e])},j={error:"",messages:[],username:"",imageUrl:"",users:[],loading:!1,signedIn:!1},y=t(103),S=t.n(y)()(i);S.connect();var R=function(e,a){S.on("message",(function(a){e({type:g.ADD_MESSAGE,payload:{message:a}})})),S.on("joinedRoom",(function(a){e({type:g.USER_JOINED,payload:{user:a}})})),S.on("leftRoom",(function(t){a===t.username?e({type:g.RESET,payload:{}}):e({type:g.USER_LEFT,payload:{user:t}})})),e({type:g.SIGN_TO_ROOM,payload:{}}),S.on("error",(function(e){console.log(e)}))},h=function(e,a,t){var o=r.a.createContext();return{Context:o,Provider:function(c){var l=c.children,s=Object(n.useReducer)(e,t),i=Object(u.a)(s,2),m=i[0],p=i[1],E=Object.keys(a).reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},t,a[t](p)))}),{});return r.a.createElement(o.Provider,{value:Object(O.a)({state:m},E)},l)}}}((function(e,a){var t=a.type,n=a.payload,r=n.user;switch(t){case g.SET_ERROR:var o=n.error;return Object(O.a)(Object(O.a)({},e),{},{error:o,loading:!1});case g.ADD_MESSAGE:var c=n.message;return Object(O.a)(Object(O.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(b.a)(e.messages),[c])});case g.USER_JOIN:var l=n.room,s=n.username;return Object(O.a)(Object(O.a)(Object(O.a)({},e),l),{},{loading:!0,username:s,error:""});case g.USER_LEFT:return Object(O.a)(Object(O.a)({},e),{},{users:Object(O.a)(Object(O.a)({},e.users),{},Object(f.a)({},r.username,null)),messages:[].concat(Object(b.a)(e.messages),[v(g.USER_LEFT,r.username)]),loading:!1,error:""});case g.USER_JOINED:return Object(O.a)(Object(O.a)({},e),{},{error:"",loading:!1,messages:[].concat(Object(b.a)(e.messages),[v(g.USER_JOINED,r.username)]),users:Object(O.a)(Object(O.a)({},e.users),{},Object(f.a)({},r.username,r))});case g.SET_PROFILE_IMAGE:var i=n.imageUrl;return Object(O.a)(Object(O.a)({},e),{},{imageUrl:i,error:"",loading:!1});case g.SET_LOADING:var u=n.loading;return Object(O.a)(Object(O.a)({},e),{},{loading:u});case g.ASSIGN_TO_ROOM:return Object(O.a)(Object(O.a)({},e),{},{signedIn:!0});case g.RESET:return Object(O.a)({},j);default:return e}}),{signUpForRoomChanges:function(e){return function(){var a=Object(d.a)(E.a.mark((function a(t){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e,t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},joinRoom:function(e){return function(){var a=Object(d.a)(E.a.mark((function a(t,n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e({type:g.SET_LOADING,payload:{loading:!0}});case 2:S.emit("joinRoom",{username:t,imageUrl:n},(function(a,n){e(n?{type:g.SET_ERROR,payload:{error:n}}:{type:g.USER_JOIN,payload:{room:a,username:t}})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},sendMessage:function(e){return function(a,t){S.emit("sendMessage",{username:a,message:t},(function(a,t){e(t?{type:g.SET_ERROR,payload:{error:t}}:{type:g.ADD_MESSAGE,payload:{message:a}})}))}},setProfileImage:function(e){return function(){var a=Object(d.a)(E.a.mark((function a(t){var n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(t.size>4e6)){a.next=5;break}e({type:g.SET_ERROR,payload:{error:"File Too Big"}}),a.next=10;break;case 5:return a.next=7,e({type:g.SET_LOADING,payload:{loading:!0}});case 7:(n=new FileReader).onload=function(){var a=Object(d.a)(E.a.mark((function a(t){var n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.result,e({type:g.SET_PROFILE_IMAGE,payload:{imageUrl:n}});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),n.readAsDataURL(t);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),e({type:g.SET_ERROR,payload:{error:"File Format Not Supported"}});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}},j),_=h.Provider,x=h.Context,w=t(248),I=t(246),T=t(262),N=t(249),k=t(252),U=t(251),D=t(253),A=t(265),C=t(243),M=t(37),G=t(254);function F(){var e=Object(m.a)(["\n        pointer-events: none;\n      "]);return F=function(){return e},e}function L(){var e=Object(m.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  a {\n    text-decoration: none;\n    ","\n  }\n"]);return L=function(){return e},e}var P=M.b.div(L(),(function(e){return e.disabled&&Object(M.a)(F())})),J=Object(C.a)((function(e){return{avatarPicker:{padding:"0px",marginTop:"10px",borderWidth:"thin",flexDirection:"row",display:"flex",alignItems:"center",alignText:"center"}}})),B=function(e){var a=J(),t=Object(n.useContext)(x),o=t.state,c=t.setProfileImage,l=t.joinRoom,s=o.loading,i=function(e){var a=document.createElement("input");return a.setAttribute("type","file"),a.onchange=function(a){e(a.target.files[0])},a}(c),m=Object(n.useState)(null),p=Object(u.a)(m,2),E=p[0],d=p[1],f=Object(n.useCallback)((function(e){e&&l(e,o.imageUrl)}),[o]);return r.a.createElement(I.a,{"aria-labelledby":"simple-dialog-title",open:!o.username},r.a.createElement(w.a,null,"Sign In"),r.a.createElement(N.a,null,r.a.createElement(T.a,{error:o.error,id:"outlined-basic",label:"Username",variant:"outlined",value:E||"",helperText:o.error,onChange:function(e){d(e.target.value)}}),r.a.createElement(U.a,{className:a.avatarPicker},r.a.createElement(A.a,{alt:E,src:o.imageUrl}),r.a.createElement(P,{className:a.linkContainer},r.a.createElement("a",{href:"#",onClick:function(){i.click()}},"Choose Image")))),r.a.createElement(k.a,null,r.a.createElement(D.a,{variant:"contained",color:"primary",endIcon:s&&r.a.createElement(G.a,{color:"white",size:20}),onClick:function(){f(E)}},"SIGN IN")))},W=t(260),z=t(259),H=t(258),K=t(266),V=t(264),Y=t(261),$=t(47),q=t(113),Q=t(263),X=t(110),Z=t.n(X),ee=t(255),ae=t(257),te=t(256);function ne(){var e=Object(m.a)(["\n        background-color: lightgrey;\n      "]);return ne=function(){return e},e}function re(){var e=Object(m.a)(["\n  ","\n"]);return re=function(){return e},e}var oe=Object(M.b)(ee.a)(re(),(function(e){return"System"===e.username&&Object(M.a)(ne())}));Q.a.addLocale(Z.a);var ce=new Q.a("en-US"),le=function(e){var a=e.classes,t=e.user,n=Object(q.a)(e,["classes","user"]),o=n.message_id,c=n.sent_at,l=n.username,s=n.message,i=new Date(c);return r.a.createElement(oe,{username:l,alignItems:"flex-start",key:o},r.a.createElement(te.a,null,r.a.createElement(A.a,{alt:l,src:t.imageUrl})),r.a.createElement(ae.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{variant:"h6",component:"span",color:"textPrimary"},l)," said  \u2014  ",r.a.createElement($.a,{variant:"h6",component:"span",color:"textPrimary"},r.a.createElement($.a,{stlye:{display:"table-caption"},variant:"h6",component:"span",color:"textPrimary"},"".concat(s)))),primary:r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{component:"span",style:{alignSelf:"flex-end"},variant:"body2",className:a.inline,color:"textPrimary"},"".concat(ce.format(i))))}))},se=t(111),ie=t(250),ue=Object(C.a)((function(e){return{root:{height:"80vh",overflowY:"scroll",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),me=function(){var e=ue(),a=Object(n.useContext)(x).state,t=a.messages,o=a.users,c=Object(n.useState)(!0),l=Object(u.a)(c,2),s=l[0],i=l[1],m=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){s&&m.current.scrollIntoView({behavior:"smooth"})}),[s,t.length]);var p=Object(se.a)((function(){i(!0)}));return r.a.createElement(ie.a,{ref:p,className:e.root,onScroll:function(e){i(!1)}},t.map((function(a,t){return r.a.createElement("div",{key:t},r.a.createElement(le,Object.assign({classes:e,user:o[a.username]||{}},a)),r.a.createElement(H.a,{variant:"inset",component:"li"}))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:m}))},pe=Object(C.a)((function(e){return{root:{display:"flex",flexDirection:"row","& .MuiTextField-root":{width:"100%"}}}})),Ee=function(){var e=pe(),a=Object(n.useState)(""),t=Object(u.a)(a,2),o=t[0],c=t[1],l=Object(n.useContext)(x),s=l.state,i=s.username,m=s.error,p=l.sendMessage;return r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(T.a,{error:i&&m,helperText:i&&m,id:"outlined-multiline-static",label:"Message",multiline:!0,rows:4,value:o,variant:"outlined",onChange:function(e){c(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey&&(p(i,o),c(""))}}),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){p(i,o),c("")}},"SEND"))},de=Object(C.a)((function(e){return{root:{overflowY:"scroll",backgroundColor:e.palette.background.paper}}})),fe=function(){var e=Object(n.useContext)(x).state.users,a=de();return r.a.createElement(ie.a,{className:a.root,dense:!1},Object.values(e).filter(Boolean).map((function(e){var a=e.username,t=e.imageUrl;return r.a.createElement(ee.a,{key:a},r.a.createElement(te.a,null,r.a.createElement(A.a,{alt:a,src:t})),r.a.createElement(ae.a,{primary:a}))})))},Oe=Object(C.a)((function(e){var a;return{root:(a={display:"flex",paddingTop:"40px",flexDirectoion:"row"},Object(f.a)(a,"display","flex"),Object(f.a)(a,"overflow","none"),a),drawer:Object(f.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(f.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(f.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},toolbarHeader:{flexGrow:1,padding:e.spacing(3)},content:{width:"calc(100% - ".concat(240,"px)"),flex:1,display:"flex",flexDirection:"column"}}})),be=function(){var e=Oe(),a=r.a.useState(!1),t=Object(u.a)(a,2),o=t[0],c=t[1],l=Object(n.useContext)(x),s=l.state,i=s.users,m=s.signedIn,p=s.username,E=l.signUpForRoomChanges;Object(n.useEffect)((function(){!m&&p&&E(p)}),[p]);var d=r.a.createElement("div",null,r.a.createElement("div",{className:e.toolbar},r.a.createElement("div",{className:e.toolbarHeader},"Logged In Users")),r.a.createElement(H.a,null),r.a.createElement(fe,{users:i})),f=void 0!==window?function(){return window.document.body}:void 0;return r.a.createElement("div",{className:e.root},r.a.createElement(z.a,null),r.a.createElement("div",{className:e.drawer},r.a.createElement(V.a,{smUp:!0,implementation:"css"},r.a.createElement(K.a,{container:f,variant:"temporary",anchor:"left",open:o,onClose:function(){c(!o)},classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},d)),r.a.createElement(V.a,{xsDown:!0,implementation:"css"},r.a.createElement(K.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},d))),r.a.createElement("div",{className:e.content},r.a.createElement(W.a,{position:"fixed",className:e.appBar},r.a.createElement(Y.a,{className:e.appBar},r.a.createElement($.a,{variant:"h6",noWrap:!0},"Any-Clip Chat"))),r.a.createElement(me,null),r.a.createElement(Ee,null)))},ge=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(be,null))};var ve=function(){return r.a.createElement(_,null,r.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.14ec0ea3.chunk.js.map